{% extends "base.html" %}

{% block content %}

  {# XXX playlist #}
  {# XXX shortlist #}

  {% if show.tracks_sorted_by_votes %}
    <h2 class="heading">current requests</h2>
    {# XXX <p class="subheading">&mdash; {{ week.count_votes }} request{{ week.count_votes|pluralize }} - {{ tracks|length }} track{{ tracks|length|pluralize }} - {{ week.count_voters }} {{ week.count_voters|pluralize:"person, people" }} - {{ tracks_len }} &mdash;</p> #}
    {% include "tracklist.html" with tracks=show.tracks_sorted_by_votes %}

    <p class="aside">Want to vote for something else?</p>
  {% else %}
    <h2 class="message">No requests yet</h2>
  {% endif %}

  <p class="aside">Search, browse the <a href="/show/">playlist archive</a> or just <a href="/roulette/">throw darts at the wall</a>.</p>

  {# XXX discard #}

{% endblock %}

{% block footer_scripts %}
  {% if shortlist %}
    {# XXX
      <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js" type="text/javascript"></script>
      <script>
        var s = $('#shortlist ul');
        s.sortable({
          update: function(e, ui) {
            // send the new order to the server
            string = s.sortable("serialize");
            url = "{% url 'shortlist_order' %}?" + string;
            $.ajax(url);
          }
        });
      </script>
    #} 
  {% endif %}
{% endblock %}
