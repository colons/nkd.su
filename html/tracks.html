{% extends "base.html" %}

{% block query %}{{ query }}{% endblock %}

{% block content %}

{% if query %}
  <h2 class="heading">search results</h2>
  <p class="subheading">&mdash; {{ query }} &mdash;</p>
{% elif additions_from %}
<h2 class="heading">{{ tracks|length }} new track{{ tracks|pluralize }} in the week of {{ additions_from|date:"F"|lower }}&nbsp;{{ additions_from|date:"jS, Y" }}</h2>
  <p class="subheading">&lt;
  {% if prev_week_with_additions %}
  <a href="/added/{{ prev_week_with_additions|date:"d-m-Y" }}/">older</a>
  {% else %}
    &mdash;
  {% endif %}
  |
  {% if next_week_with_additions %}
    <a href="/added/{{ next_week_with_additions|date:"d-m-Y" }}/">newer</a>
  {% else %}
    &mdash;
  {% endif %}
    &gt;
  {% if plays_this_week and not is_current_week %}
    <p class="subheading"><a href="/show/{{ additions_from|date:"d-m-Y" }}">this week's playlist</a></p>
  {% endif %}
{% elif title %}
  <h2 class="heading">{{ title }}</h2>
{% endif %}

{% if tracks %}
  {% include "tracklist.html" %}
{% else %}
  <h3 class="message">no tracks found</h3>
  <p class="aligned"><a href="/roulette/">show me something else</a></p>
{% endif %}

{% if query and page.has_other_pages %}
  <p class="aside">
{% if page.has_previous %}
  <a href="{{ page.previous_page_number }}">&lt;&lt;</a>
{% else %}
  &mdash; 
{% endif %}
{{ page.number }} / {{ page.paginator.num_pages }}
{% if page.has_next %}
  <a href="{{ page.next_page_number }}">&gt;&gt;</a>
{% else %}
  &mdash; 
{% endif %}
  </p>
  <p class="aside">{{ page.start_index }}-{{ page.end_index }} / {{ page.paginator.count }}</p>
{% endif %}

{% if query %}
  <!-- this is a search and you may not have found what you're looking for -->
  <p class="aligned everything">can't find what you're looking for? <a href="/request?q={{ query|urlencode }}">get it added to the library</a></p>
{% endif %}

{% if title == 'surprise me' %}
  <p class="aside"><a href=".">these are all terrible</a></p>
{% endif %}

{% endblock %}
